digraph events {
  node [shape=record];

  user_input   [label = "User Input"];
  fire_event   [label = "Fire Event"];
  rotate_event [label = "Rotate Event"];
  simulation_reset [label = "Simulation Reset"];
  route_fire   [label = "Route Fire Event"];
  route_rotate [label = "Route Rotate Event"];
  my_simulation   [label = "My Simulation"];
  their_simulation   [label = "Their Simulation"];

  my_physics [label = "Physics"];
  their_physics [label = "Physics"];

  my_physics -> my_simulation [dir=both];
  their_physics -> their_simulation [dir=both];
  {rank=same my_physics their_physics }

  user_input -> fire_event -> route_fire -> my_simulation;
  route_fire -> their_simulation;
  user_input -> rotate_event -> route_rotate;

  rotate_event -> my_simulation;
  simulation_reset -> my_simulation;
  simulation_reset -> their_simulation;

  route_rotate -> their_simulation;

  subgraph cluster_server {
    {rank=same simulation_reset route_fire route_rotate}
  }

}